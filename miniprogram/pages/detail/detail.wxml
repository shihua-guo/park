<!--detail.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨å›¾ç‰‡è½®æ’­ -->
  <view class="header-section">
    <swiper 
      class="image-swiper" 
      indicator-dots="{{false}}"
      circular="{{true}}"
      autoplay="{{false}}"
      bindchange="onSwiperChange"
      bindtap="onImageTap"
    >
      <swiper-item wx:for="{{images}}" wx:key="*this">
        <image class="swiper-image" src="{{item}}" mode="aspectFill" />
      </swiper-item>
    </swiper>
    
    <!-- é¡¶éƒ¨é®ç½©æ¸å˜ -->
    <view class="header-gradient"></view>
    
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <view class="nav-bar">
      <view class="nav-btn back-btn" bindtap="onBack">
        <text class="icon">â†</text>
      </view>
      <view class="nav-actions">
        <view class="nav-btn" bindtap="onShare">
          <text class="icon">â†—ï¸</text>
        </view>
        <view class="nav-btn" bindtap="onMore">
          <text class="icon">â‹¯</text>
        </view>
      </view>
    </view>
    
    <!-- è½®æ’­åˆ‡æ¢æŒ‰é’® -->
    <view class="swiper-controls">
      <view class="control-btn prev-btn" bindtap="onPrevImage">
        <text class="icon">â€¹</text>
      </view>
      <view class="control-btn next-btn" bindtap="onNextImage">
        <text class="icon">â€º</text>
      </view>
    </view>
    
    <!-- å›¾ç‰‡è®¡æ•°å™¨ -->
    <view class="image-counter">
      <text class="icon">ğŸ–¼ï¸</text>
      <text>{{currentImageIndex + 1}} / {{images.length}}</text>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content-section">
    <!-- æ‹–åŠ¨æŒ‡ç¤ºå™¨ -->
    <view class="drag-indicator"></view>
    
    <!-- æ ‡é¢˜å’Œè¯„åˆ† -->
    <view class="title-section">
      <text class="title">{{placeInfo.name}}</text>
      <view class="rating-row">
        <view class="rating">
          <text class="star-icon">â­</text>
          <text class="rating-text">{{placeInfo.rating}}</text>
        </view>
        <text class="divider">|</text>
        <text class="reviews-text">{{placeInfo.reviewCount}} æ¡ç²¾é€‰è¯„ä»·</text>
      </view>
    </view>

    <!-- æ ‡ç­¾ -->
    <view class="tags-section">
      <view class="tag" wx:for="{{placeInfo.tags}}" wx:key="*this">
        <text class="tag-icon">{{item.icon}}</text>
        <text class="tag-text">{{item.text}}</text>
      </view>
    </view>

    <!-- ä¿¡æ¯åˆ—è¡¨ -->
    <view class="info-list">
      <!-- åœ°å€ -->
      <view class="info-item" bindtap="onAddressTap">
        <view class="info-icon-wrapper address-icon">
          <text class="info-icon">ğŸ“</text>
        </view>
        <view class="info-content">
          <text class="info-text">{{placeInfo.address}}</text>
          <text class="info-sub">è·æ‚¨ {{placeInfo.distance}} Â· é©¾è½¦çº¦ {{placeInfo.driveTime}}</text>
        </view>
        <text class="arrow-icon">â€º</text>
      </view>

      <!-- è¥ä¸šæ—¶é—´ -->
      <view class="info-item">
        <view class="info-icon-wrapper time-icon">
          <text class="info-icon">ğŸ•</text>
        </view>
        <view class="info-content">
          <view class="time-row">
            <text class="status-badge">{{placeInfo.status}}</text>
            <text class="info-text">{{placeInfo.hours}}</text>
          </view>
          <text class="info-sub">{{placeInfo.hoursNote}}</text>
        </view>
        <text class="arrow-icon collapse">â–¼</text>
      </view>

      <!-- ç”µè¯ -->
      <view class="info-item" bindtap="onCallTap">
        <view class="info-icon-wrapper phone-icon">
          <text class="info-icon">ğŸ“</text>
        </view>
        <view class="info-content">
          <text class="info-text">{{placeInfo.phone}}</text>
        </view>
        <view class="call-btn" catchtap="onCallTap">
          <text class="call-text">æ‹¨æ‰“</text>
        </view>
      </view>
    </view>

    <!-- åœ°ç‚¹ä»‹ç» -->
    <view class="description-section">
      <view class="section-title">
        <view class="title-indicator"></view>
        <text class="title-text">åœ°ç‚¹ä»‹ç»</text>
      </view>
      <view class="description-text">
        <text>{{placeInfo.description}}</text>
      </view>
      <view class="expand-btn" bindtap="onExpandDescription">
        <text class="expand-text">æŸ¥çœ‹å…¨éƒ¨ä»‹ç»</text>
        <text class="expand-icon">â–¼</text>
      </view>
    </view>

    <!-- é…å¥—è®¾æ–½ -->
    <view class="facilities-section">
      <view class="section-title">
        <view class="title-indicator"></view>
        <text class="title-text">é…å¥—è®¾æ–½</text>
      </view>
      <view class="facilities-grid">
        <view class="facility-item" wx:for="{{placeInfo.facilities}}" wx:key="*this">
          <text class="facility-icon">{{item.icon}}</text>
          <text class="facility-text">{{item.name}}</text>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨å ä½ -->
    <view class="bottom-placeholder"></view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="footer-bar">
    <view class="footer-actions">
      <view class="action-btn" bindtap="onFavorite">
        <text class="action-icon">{{isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text class="action-text">æ”¶è—</text>
      </view>
      <view class="action-btn" bindtap="onReview">
        <text class="action-icon">ğŸ’¬</text>
        <text class="action-text">å†™è¯„ä»·</text>
      </view>
    </view>
    <button class="navigate-btn" bindtap="onNavigate">
      <text class="nav-icon">ğŸ§­</text>
      <text class="nav-text">å¯¼èˆªå‰å¾€</text>
    </button>
  </view>
</view>
