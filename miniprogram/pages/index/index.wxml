<!--index.wxml-->
<view class="container">
  <!-- åœ°å›¾è§†å›¾ -->
  <map 
    id="map" 
    class="map" 
    longitude="{{longitude}}" 
    latitude="{{latitude}}" 
    scale="{{scale}}"
    markers="{{markers}}"
    bindmarkertap="onMarkerTap"
    bindtap="onMapTap"
    show-location="{{true}}"
  >
  </map>

  <!-- é¡¶éƒ¨æœç´¢æ å’Œæ ‡ç­¾ -->
  <view class="top-bar">
    <view class="search-container">
      <view class="city-selector" bindtap="onCitySelect">
        <text class="city-text">{{currentCity}}</text>
        <text class="icon-arrow">â–¼</text>
      </view>
      <view class="search-box">
        <text class="icon-search">ğŸ”</text>
        <input class="search-input" placeholder="æœç´¢å…¬å›­ã€æ­¥é“..." />
      </view>
    </view>
    
    <!-- åˆ†ç±»æ ‡ç­¾ -->
    <scroll-view class="category-scroll" scroll-x="{{true}}" show-scrollbar="{{false}}">
      <view class="category-item filter-btn" bindtap="onFilterTap">
        <text class="category-icon">âš™ï¸</text>
        <text class="category-text">ç±»å‹</text>
      </view>
      <view 
        wx:for="{{categories}}" 
        wx:key="id" 
        class="category-item {{currentCategory === item.id ? 'active' : ''}}"
        bindtap="onCategoryTap"
        data-id="{{item.id}}"
      >
        <text class="category-icon">{{item.icon}}</text>
        <text class="category-text">{{item.name}}</text>
      </view>
    </scroll-view>
  </view>

  <!-- å®šä½æŒ‰é’® -->
  <view class="location-btn" bindtap="onLocationTap">
    <text class="icon-location">ğŸ“</text>
  </view>

  <!-- åº•éƒ¨åœ°ç‚¹å¡ç‰‡ -->
  <view class="place-card {{showCard ? 'show' : ''}}" bindtap="onCardTap">
    <view class="card-content">
      <view class="card-image-container">
        <image class="card-image" src="{{currentPlace.image}}" mode="aspectFill" />
        <view class="card-rating">
          <text class="star-icon">â­</text>
          <text class="rating-text">{{currentPlace.rating}}</text>
        </view>
      </view>
      
      <view class="card-info">
        <view class="card-header">
          <text class="card-title">{{currentPlace.name}}</text>
        </view>
        <view class="card-tags">
          <text class="tag" wx:for="{{currentPlace.tags}}" wx:key="*this">{{item}}</text>
        </view>
        <view class="card-location">
          <text class="location-icon">ğŸ“</text>
          <text class="location-text">{{currentPlace.address}} Â· {{currentPlace.distance}}</text>
        </view>
      </view>
    </view>
    
    <button class="navigate-btn" catchtap="onNavigate">
      <text class="nav-icon">ğŸ§­</text>
      <text class="nav-text">å¯¼èˆªå‰å¾€</text>
    </button>
  </view>
</view>
